<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="/vexflow-examples/css/2-col.css">
    

    <link rel="stylesheet" href="/vexflow-examples/css/theme.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11/styles/github.min.css" media="(prefers-color-scheme: light)">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11/styles/github-dark-dimmed.min.css" media="(prefers-color-scheme: dark)">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
  
  <!-- allow extra tags in the head -->
  
  <title>textbracket</title>
</head>
<body>
    <div class="container">
      
      <div class="nav-container">
    <h3 class="nav-title">Examples</h3>
    <div class="site-nav">
  
  

  
    
    
    <div class="section">
      <h3 class="section-header">
        Components
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/components/hairpin/" class="">hairpin</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/components/textbracket/" class="active">textbracket</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Entry
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-bravura.esm/" class="">vexflow-bravura.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-bravura/" class="">vexflow-bravura.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-core.esm/" class="">vexflow-core.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-core/" class="">vexflow-core.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-debug-with-tests/" class="">vexflow-debug-with-tests.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-debug/" class="">vexflow-debug.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow.esm/" class="">vexflow.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow/" class="">vexflow.js</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Fonts
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/fonts/async-await/" class="">Async Await</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/async-promise/" class="">Async Promise</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/bravura/" class="">Bravura</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/bravura-score/" class="">Bravura Score</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/five-staves/" class="">Five Staves</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/music/" class="">Music</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/text/" class="">Text</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Interactivity
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/ui/" class="">Hover Events</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/canvas-interaction/" class="">canvas interactions</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/svg-interaction/" class="">svg interactions</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Modules
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/modules/script-tag/" class="">Async Await</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/modules/module/" class="">ES Modules</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/modules/both/" class="">Module and Script</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Node
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/node/canvas/" class="">Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/font-draw/" class="">Font~Draw</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import1/" class="">Import 1</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import2/" class="">Import 2</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import3/" class="">Import 3</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/pdf-canvas/" class="">PDF Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/pdf-svg/" class="">PDF SVG</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/require1/" class="">Require 1</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/require2/" class="">Require 2</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/svg/" class="">SVG</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/customcontext/" class="">customContext</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/font-load-2/" class="">font-load-2</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Opentype
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/opentype/canvas/" class="">Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/opentype/load/" class="">Load</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Worker
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/worker/" class="">Using Workers</a>
            </li>
          
        </ul>
      
    </div>
  
</div>

</div>
      

        <main class="main-content">
          <div class="content">
            <button id="open-sidebar-button">
              <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px"><path d="M165.13-254.62q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.86q7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.87q-7.22 7.12-17.9 7.12H165.13Zm0-200.25q-10.68 0-17.9-7.27-7.23-7.26-7.23-17.99 0-10.74 7.23-17.87 7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.27 7.23 7.26 7.23 17.99 0 10.74-7.23 17.87-7.22 7.13-17.9 7.13H165.13Zm0-200.26q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.87q7.22-7.12 17.9-7.12h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.86q-7.22 7.13-17.9 7.13H165.13Z"></path></svg>
          </button>
          
<h1 id="textbracket" tabindex="-1"><a class="header-anchor" href="#textbracket">Textbracket</a></h1>




<iframe width="100%" height="250" srcdoc="
&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;!-- IMPORTANT: Set the character set to UTF-8. Otherwise you may get weird symbols on the score. --&gt;
    &lt;meta charset=&#34;utf-8&#34; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- Div where the scores will be output --&gt;
    &lt;div id=&#34;output&#34;&gt;&lt;/div&gt;

    &lt;!-- Load library --&gt;
    &lt;script src=&#34;https://cdn.jsdelivr.net/npm/vexflow@5.0.0/build/cjs/vexflow-core.js&#34;&gt;&lt;/script&gt;

    &lt;script&gt;
    /* global VexFlow */
    VexFlow.loadFonts(&#39;Bravura&#39;, &#39;Academico&#39;).then(() =&gt; {
      VexFlow.setFonts(&#39;Bravura&#39;, &#39;Academico&#39;);
      const { Factory, Dot } = VexFlow;
      const factory = new Factory({
        renderer: { elementId: &#39;output&#39;, width: 500, height: 200 },
      });

      const system = factory.System({ width: 400 });

      function dotted(staveNote, noteIndex = -1) {
        if (noteIndex &lt; 0) {
          Dot.buildAndAttach([staveNote], {
            all: true,
          });
        } else {
          Dot.buildAndAttach([staveNote], {
            index: noteIndex,
          });
        }
        return staveNote;
      }

      const notes = [
        dotted(factory.StaveNote({
          keys: [&#39;e##/5&#39;],
          duration: &#39;8d&#39;,
        }).addModifier(factory.Accidental({ type: &#39;##&#39; }))),

        factory.StaveNote({
          keys: [&#39;eb/5&#39;],
          duration: &#39;16&#39;,
        }).addModifier(factory.Accidental({ type: &#39;b&#39; })),

        dotted(factory.StaveNote({
          keys: [&#39;eb/4&#39;, &#39;d/5&#39;],
          duration: &#39;h&#39;,
        }), 0 /* add dot to note at index==0 */),

        dotted(factory.StaveNote({
          keys: [&#39;c/5&#39;, &#39;eb/5&#39;, &#39;g#/5&#39;],
          duration: &#39;q&#39;,
        })
          .addModifier(factory.Accidental({ type: &#39;b&#39; }), 1)
          .addModifier(factory.Accidental({ type: &#39;#&#39; }), 2)),
      ];

      factory.TextBracket({
        from: notes[0],
        to: notes[2],
        text: &#39;8&#39;,
        options: {
          superscript: &#39;vb&#39;,
          position: &#39;bottom&#39;,
          line: 3,
        },
      });

      const voice = factory.Voice().addTickables(notes);

      system
        .addStave({
          voices: [voice],
        })
        .addClef(&#39;treble&#39;)
        .addTimeSignature(&#39;4/4&#39;);

      factory.draw();
    });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;

" title="textbracket.html"></iframe>

<form action="https://jsfiddle.net/api/post/library/pure/" method="post" target="_blank">
  <textarea hidden="" name="html">
<!doctype html>
<html>
  <head>
    <!-- IMPORTANT: Set the character set to UTF-8. Otherwise you may get weird symbols on the score. -->
    <meta charset="utf-8">
  </head>
  <body>
    <!-- Div where the scores will be output -->
    <div id="output"></div>

    <!-- Load library -->
    <script src="https://cdn.jsdelivr.net/npm/vexflow@5.0.0/build/cjs/vexflow-core.js"></script>

    <script>
    /* global VexFlow */
    VexFlow.loadFonts('Bravura', 'Academico').then(() => {
      VexFlow.setFonts('Bravura', 'Academico');
      const { Factory, Dot } = VexFlow;
      const factory = new Factory({
        renderer: { elementId: 'output', width: 500, height: 200 },
      });

      const system = factory.System({ width: 400 });

      function dotted(staveNote, noteIndex = -1) {
        if (noteIndex < 0) {
          Dot.buildAndAttach([staveNote], {
            all: true,
          });
        } else {
          Dot.buildAndAttach([staveNote], {
            index: noteIndex,
          });
        }
        return staveNote;
      }

      const notes = [
        dotted(factory.StaveNote({
          keys: ['e##/5'],
          duration: '8d',
        }).addModifier(factory.Accidental({ type: '##' }))),

        factory.StaveNote({
          keys: ['eb/5'],
          duration: '16',
        }).addModifier(factory.Accidental({ type: 'b' })),

        dotted(factory.StaveNote({
          keys: ['eb/4', 'd/5'],
          duration: 'h',
        }), 0 /* add dot to note at index==0 */),

        dotted(factory.StaveNote({
          keys: ['c/5', 'eb/5', 'g#/5'],
          duration: 'q',
        })
          .addModifier(factory.Accidental({ type: 'b' }), 1)
          .addModifier(factory.Accidental({ type: '#' }), 2)),
      ];

      factory.TextBracket({
        from: notes[0],
        to: notes[2],
        text: '8',
        options: {
          superscript: 'vb',
          position: 'bottom',
          line: 3,
        },
      });

      const voice = factory.Voice().addTickables(notes);

      system
        .addStave({
          voices: [voice],
        })
        .addClef('treble')
        .addTimeSignature('4/4');

      factory.draw();
    });
    </script>
  </body>
</html>

</textarea><br>
  <input type="submit" value="Edit in JSFiddle">
</form>

<pre><code class="language-javascript">

&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;!-- IMPORTANT: Set the character set to UTF-8. Otherwise you may get weird symbols on the score. --&gt;
    &lt;meta charset=&#34;utf-8&#34; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- Div where the scores will be output --&gt;
    &lt;div id=&#34;output&#34;&gt;&lt;/div&gt;

    &lt;!-- Load library --&gt;
    &lt;script src=&#34;https://cdn.jsdelivr.net/npm/vexflow@5.0.0/build/cjs/vexflow-core.js&#34;&gt;&lt;/script&gt;

    &lt;script&gt;
    /* global VexFlow */
    VexFlow.loadFonts(&#39;Bravura&#39;, &#39;Academico&#39;).then(() =&gt; {
      VexFlow.setFonts(&#39;Bravura&#39;, &#39;Academico&#39;);
      const { Factory, Dot } = VexFlow;
      const factory = new Factory({
        renderer: { elementId: &#39;output&#39;, width: 500, height: 200 },
      });

      const system = factory.System({ width: 400 });

      function dotted(staveNote, noteIndex = -1) {
        if (noteIndex &lt; 0) {
          Dot.buildAndAttach([staveNote], {
            all: true,
          });
        } else {
          Dot.buildAndAttach([staveNote], {
            index: noteIndex,
          });
        }
        return staveNote;
      }

      const notes = [
        dotted(factory.StaveNote({
          keys: [&#39;e##/5&#39;],
          duration: &#39;8d&#39;,
        }).addModifier(factory.Accidental({ type: &#39;##&#39; }))),

        factory.StaveNote({
          keys: [&#39;eb/5&#39;],
          duration: &#39;16&#39;,
        }).addModifier(factory.Accidental({ type: &#39;b&#39; })),

        dotted(factory.StaveNote({
          keys: [&#39;eb/4&#39;, &#39;d/5&#39;],
          duration: &#39;h&#39;,
        }), 0 /* add dot to note at index==0 */),

        dotted(factory.StaveNote({
          keys: [&#39;c/5&#39;, &#39;eb/5&#39;, &#39;g#/5&#39;],
          duration: &#39;q&#39;,
        })
          .addModifier(factory.Accidental({ type: &#39;b&#39; }), 1)
          .addModifier(factory.Accidental({ type: &#39;#&#39; }), 2)),
      ];

      factory.TextBracket({
        from: notes[0],
        to: notes[2],
        text: &#39;8&#39;,
        options: {
          superscript: &#39;vb&#39;,
          position: &#39;bottom&#39;,
          line: 3,
        },
      });

      const voice = factory.Voice().addTickables(notes);

      system
        .addStave({
          voices: [voice],
        })
        .addClef(&#39;treble&#39;)
        .addTimeSignature(&#39;4/4&#39;);

      factory.draw();
    });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;


</code></pre>

          </div>
        </main>
        <div class="overlay" id="overlay"></div>
    </div>
    <script>
        const toggleButton = document.getElementById('open-sidebar-button');
        const overlay = document.getElementById('overlay');
        const themeSelector = document.getElementById('theme-select')

        toggleButton.addEventListener('click', () => {
        document.body.classList.toggle('nav-open');
        });    

        overlay.addEventListener('click', () => {
        document.body.classList.remove('nav-open');
        });
        
        // themeSelector.addEventListener('click', () => {
        //     console.log("pressed")
        //     if (document.documentElement.getAttribute('data-theme') == 'light'){
        //         document.documentElement.setAttribute('data-theme', 'dark')
        //     }
        //     else {
        //         document.documentElement.setAttribute('data-theme', 'light')
        //     }
        // })

    </script>
    <script>
        // works pretty well, on page resize could be reran when different toc is shown
document.addEventListener("DOMContentLoaded", () => {
  const allTOCLinks = document.querySelectorAll(".toc a");
  const headings = Array.from(allTOCLinks)
    .map(link => document.querySelector(decodeURIComponent(link.getAttribute("href"))))
    .filter(Boolean);

  const isVisible = el => !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.getAttribute("id");

        // Remove active from all visible TOCs
        allTOCLinks.forEach(link => {
          if (isVisible(link)) link.classList.remove("active");
        });

        // Add active to visible link matching this heading
        const matchingLinks = Array.from(document.querySelectorAll(`.toc a[href="#${id}"]`));
        matchingLinks.forEach(link => {
          if (isVisible(link)) link.classList.add("active");
        });
      }
    });
  }, {
    // rootMargin: "-50% 0% -40% 0%",
    threshold: 0.1
  });

  headings.forEach(h => observer.observe(h));
});
      </script>   
      
      <script>
          hljs.highlightAll();
      </script>
    
</body>
</html>