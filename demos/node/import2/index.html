<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- site-wide stylesheets -->
    <link rel="stylesheet" href="/vexflow-examples/css/reset.css">
    <link rel="stylesheet" href="/vexflow-examples/css/theme.css">
    <link rel="stylesheet" href="/vexflow-examples/css/helpers.css">   
    <link rel="stylesheet" href="/vexflow-examples/css/layout.css">
    <link rel="stylesheet" href="/vexflow-examples/css/base.css">
    <!-- contains core js functionality for all examples -->
    <script src="/vexflow-examples/js/main.js" defer=""></script>
    <!-- styles for syntax highlighting  -->
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet" media="(prefers-color-scheme: dark)">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet" media="(prefers-color-scheme: light)">
  <!-- allow extra tags in the head -->
  
  <title>Import Example 2</title>
</head>
<body>
   <div class="container">
    
      <div class="nav-container">
    <h3 class="nav-title">Examples</h3>
    <div class="site-nav">
  
  

  
    
    
    <div class="section">
      <h3 class="section-header">
        Components
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/components/hairpin/" class="">hairpin</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/components/textbracket/" class="">textbracket</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Entry
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-bravura.esm/" class="">vexflow-bravura.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-bravura/" class="">vexflow-bravura.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-core.esm/" class="">vexflow-core.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-core/" class="">vexflow-core.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-debug-with-tests/" class="">vexflow-debug-with-tests.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow-debug/" class="">vexflow-debug.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow.esm/" class="">vexflow.esm.js</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/entry/vexflow/" class="">vexflow.js</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Fonts
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/fonts/async-await/" class="">Async Await</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/async-promise/" class="">Async Promise</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/bravura/" class="">Bravura</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/bravura-score/" class="">Bravura Score</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/five-staves/" class="">Five Staves</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/music/" class="">Music</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/fonts/text/" class="">Text</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Interactivity
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/ui/" class="">Hover Events</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/canvas-interaction/" class="">canvas interactions</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/interactivity/svg-interaction/" class="">svg interactions</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Modules
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/modules/script-tag/" class="">Async Await</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/modules/module/" class="">ES Modules</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/modules/both/" class="">Module and Script</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Node
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/node/canvas/" class="">Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/font-draw/" class="">Font~Draw</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import1/" class="">Import 1</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import2/" class="active">Import 2</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/import3/" class="">Import 3</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/pdf-canvas/" class="">PDF Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/pdf-svg/" class="">PDF SVG</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/require1/" class="">Require 1</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/require2/" class="">Require 2</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/svg/" class="">SVG</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/customcontext/" class="">customContext</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/node/font-load-2/" class="">font-load-2</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Opentype
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/opentype/canvas/" class="">Canvas</a>
            </li>
          
            <li>
              <a href="/vexflow-examples/demos/opentype/load/" class="">Load</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Tests
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/tests/unit-tests/" class="">Unit Tests</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Tools
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/tools/glyphs/" class="">Glyph Inspector</a>
            </li>
          
        </ul>
      
    </div>
  
    
    
    <div class="section">
      <h3 class="section-header">
        Worker
      </h3>
      
        <ul class="section-links">
          
            <li>
              <a href="/vexflow-examples/demos/worker/" class="">Using Workers</a>
            </li>
          
        </ul>
      
    </div>
  
</div>
</div>
      

        <main class="main-content">
          <section class="content-wrapper">
            <button id="open-sidebar-btn" class="svg-btn svg-btn--lg">
              <!-- menu svg -->
              <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px"><path d="M165.13-254.62q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.86q7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.87q-7.22 7.12-17.9 7.12H165.13Zm0-200.25q-10.68 0-17.9-7.27-7.23-7.26-7.23-17.99 0-10.74 7.23-17.87 7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.27 7.23 7.26 7.23 17.99 0 10.74-7.23 17.87-7.22 7.13-17.9 7.13H165.13Zm0-200.26q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.87q7.22-7.12 17.9-7.12h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.86q-7.22 7.13-17.9 7.13H165.13Z"></path></svg>
          </button>
          
<h1 id="import-example-2" tabindex="-1"><a class="header-anchor" href="#import-example-2">Import Example 2</a></h1>





  <div class="code-demo">
    
    
    <div class="code-block">
    <button class="copy-btn svg-btn" type="button" aria-label="Copy code">
    <svg fill="blue" viewBox="0 0 32 32" data-name="Layer 1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title></title><path d="M27.2,8.22H23.78V5.42A3.42,3.42,0,0,0,20.36,2H5.42A3.42,3.42,0,0,0,2,5.42V20.36a3.43,3.43,0,0,0,3.42,3.42h2.8V27.2A2.81,2.81,0,0,0,11,30H27.2A2.81,2.81,0,0,0,30,27.2V11A2.81,2.81,0,0,0,27.2,8.22ZM5.42,21.91a1.55,1.55,0,0,1-1.55-1.55V5.42A1.54,1.54,0,0,1,5.42,3.87H20.36a1.55,1.55,0,0,1,1.55,1.55v2.8H11A2.81,2.81,0,0,0,8.22,11V21.91ZM28.13,27.2a.93.93,0,0,1-.93.93H11a.93.93,0,0,1-.93-.93V11a.93.93,0,0,1,.93-.93H27.2a.93.93,0,0,1,.93.93Z"></path></g></svg>
    </button>
    <pre><code class="language-mjs">// Summary:<br>//   Save scores to portable SVG, with embedded OTF fonts (base64 encoded).<br>//   This demo is buggy, since the note heads are detached from the stems.<br>//   Perhaps this is a glyph measurement issue?<br>//<br>// Run:<br>//   node import2.mjs<br>//<br>// Press a key to advance to the next command. CTRL+C to quit.<br>// This demo uses await import(...) to load vexflow.js.<br><br>import { default as fs } from 'fs';<br><br>import { JSDOM } from 'jsdom';<br><br>// Reference to VexFlow, assigned in the step1() function.<br>let VF;<br><br>async function waitForKeyPress() {<br>  process.stdin.setRawMode(true);<br>  return new Promise((resolve) =><br>    process.stdin.once('data', (data) => {<br>      // Handle CTRL+C.<br>      const byteArray = [...data];<br>      if (byteArray.length > 0 && byteArray[0] === 3) {<br>        console.log('^C');<br>        process.exit(1);<br>      }<br>      process.stdin.setRawMode(false);<br>      resolve();<br>    })<br>  );<br>}<br><br>function svgScore(fontName) {<br>  const { Renderer, Stave, StaveNote, Formatter } = VF;<br>  const dom = new JSDOM('<!DOCTYPE html><html><body><div id="vf"></div><body></body></body></html>');<br><br>  global.document = dom.window.document;<br><br>  // Create an SVG renderer and attach it to the DIV element named "vf".<br>  const div = document.getElementById('vf');<br>  const renderer = new Renderer(div, Renderer.Backends.SVG);<br><br>  const w = 800;<br>  const h = 600;<br><br>  // Configure the rendering context.<br>  renderer.resize(w, h);<br>  const ctx = renderer.getContext();<br>  ctx.setFillStyle('#ddd');<br>  ctx.fillRect(0, 0, w, h);<br>  ctx.setFillStyle('#222');<br><br>  const stave = new Stave(10, 40, 400);<br><br>  stave.addClef('treble').addTimeSignature('4/4');<br><br>  const notes = [<br>    new StaveNote({ keys: ['c/4', 'e/4'], duration: 'h' }),<br>    new StaveNote({ keys: ['c/4', 'e/4', 'c/5'], duration: 'h' }),<br>  ];<br><br>  stave.setContext(ctx).drawWithStyle();<br>  Formatter.FormatAndDraw(ctx, stave, notes);<br><br>  // const svg = div.innerHTML.replace('<svg ',="" '<svg="" xmlns="http://www.w3.org/2000/svg" ');<br=""><br>  const svg = div.childNodes[0];<br>  svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');<br>  insertFont(svg, fontName);<br><br>  return svg.outerHTML;<br>}<br><br>function insertFont(svgElement, fontName) {<br>  const fontNameLowerCase = fontName.toLowerCase();<br>  const fontsDir = '../../node_modules/@vexflow-fonts/';<br>  const fontFile = fs.readFileSync(fontsDir + fontNameLowerCase + '/' + fontNameLowerCase + '.otf');<br>  const fontBase64 = fontFile.toString('base64');<br><br>  const defsElement = document.createElementNS('http://www.w3.org/2000/svg', 'defs');<br>  const defsString = `<br><style><br>  <![CDATA[<br>@font-face {<br>  font-family: "${fontName}";<br>  src: url("data:font/opentype;base64,${fontBase64}");<br>}<br>  ]]><br></style>`;<br>  defsElement.innerHTML = defsString;<br>  svgElement.insertBefore(defsElement, svgElement.firstChild);<br>}<br><br>async function step0() {<br>  console.log('Press any key to run the next command. CTRL+C to quit.');<br>  console.log('\n==================================\n');<br>  console.log('>>> load vexflow ...');<br><br>  // Make sure the output folder exists.<br>  if (!fs.existsSync('./output/')) {<br>    fs.mkdirSync('./output/');<br>  }<br>}<br><br>async function step1() {<br>  const { VexFlow } = await import('vexflow');<br>  VF = VexFlow;<br><br>  console.log('Loaded VexFlow Version: ', VF.BUILD.VERSION, ' Build: ', VF.BUILD.ID);<br>  console.log('The default music font stack is:', VF.getFonts());<br><br>  console.log('\n==================================\n');<br>  console.log('>>> Bravura...');<br>}<br><br>async function step2() {<br>  VF.setFonts('Bravura', 'Academico');<br>  console.log('The current music font stack is:', VF.getFonts());<br>  fs.writeFileSync('output/score_bravura.svg', svgScore('Bravura'));<br><br>  console.log('\n==================================\n');<br>  console.log('>>> Petaluma...');<br>}<br><br>async function step3() {<br>  VF.setFonts('Petaluma', 'Petaluma Script');<br>  console.log('The current music font stack is:', VF.getFonts());<br>  fs.writeFileSync('output/score_petaluma.svg', svgScore('Petaluma'));<br><br>  console.log('\n==================================\n');<br>  console.log('>>> Gonville...');<br>}<br><br>async function step4() {<br>  VF.setFonts('Gonville', 'Academico');<br>  console.log('The current music font stack is:', VF.getFonts());<br>  fs.writeFileSync('output/score_gonville.svg', svgScore('Gonville'));<br><br>  console.log('\n==================================\n');<br>  console.log('>>> Leland...');<br>}<br><br>async function step5() {<br>  VF.setFonts('Leland', 'Edwin');<br>  console.log('The current music font stack is:', VF.getFonts());<br>  fs.writeFileSync('output/score_leland.svg', svgScore('Leland'));<br><br>  console.log('\n==================================\n');<br>  console.log('DONE!');<br>}<br><br>async function runAllSteps() {<br>  await step0();<br>  await waitForKeyPress();<br>  await step1();<br>  await waitForKeyPress();<br>  await step2();<br>  await waitForKeyPress();<br>  await step3();<br>  await waitForKeyPress();<br>  await step4();<br>  await waitForKeyPress();<br>  await step5();<br>}<br><br>runAllSteps().then(() => process.exit(0));</svg></code></pre>
  </div>
  </div>
          </section>
        </main>
        <!-- only shown when navbar is open on mobile to allow for easier closing -->
        <div class="overlay" id="overlay"></div>
    </div>
</body>
</html>