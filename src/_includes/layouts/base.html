<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/helpers.css">   
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/base.css">

  <link
  href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css"
  rel="stylesheet"
  media=""
/>
  <!-- allow extra tags in the head -->
  {% if extraHead %}
    {% for tag in extraHead %}
      {{ tag }}
    {% endfor %}
  {% endif %}
  <title>{{ title }}</title>
</head>
<body>
   <div class="container{% if toc %} has-toc{% endif %}">
    {% if toc %}
        {% include "partials/nav.html" %}
      {% else %}
      {% include "partials/basic-nav.html" %}
      {% endif %}

        <main class="main-content">
          <section class="content-wrapper">
            <button id="open-sidebar-btn" class="svg-btn svg-btn--lg">
              <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px"><path d="M165.13-254.62q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.86q7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.87q-7.22 7.12-17.9 7.12H165.13Zm0-200.25q-10.68 0-17.9-7.27-7.23-7.26-7.23-17.99 0-10.74 7.23-17.87 7.22-7.13 17.9-7.13h629.74q10.68 0 17.9 7.27 7.23 7.26 7.23 17.99 0 10.74-7.23 17.87-7.22 7.13-17.9 7.13H165.13Zm0-200.26q-10.68 0-17.9-7.26-7.23-7.26-7.23-18t7.23-17.87q7.22-7.12 17.9-7.12h629.74q10.68 0 17.9 7.26 7.23 7.26 7.23 18t-7.23 17.86q-7.22 7.13-17.9 7.13H165.13Z"/></svg>
          </button>
          {{ content }}
          </section>
        </main>
        <div class="overlay" id="overlay"></div>
    </div>
    <script>
        const toggleButton = document.getElementById('open-sidebar-btn');
        const overlay = document.getElementById('overlay');
        const themeSelector = document.getElementById('theme-select')

        toggleButton.addEventListener('click', () => {
        document.body.classList.toggle('nav-open');
        });    

        overlay.addEventListener('click', () => {
        document.body.classList.remove('nav-open');
        });
        
        // themeSelector.addEventListener('click', () => {
        //     console.log("pressed")
        //     if (document.documentElement.getAttribute('data-theme') == 'light'){
        //         document.documentElement.setAttribute('data-theme', 'dark')
        //     }
        //     else {
        //         document.documentElement.setAttribute('data-theme', 'light')
        //     }
        // })

    </script>
    <script>
        // works pretty well, on page resize could be reran when different toc is shown
document.addEventListener("DOMContentLoaded", () => {
  const allTOCLinks = document.querySelectorAll(".toc a");
  const headings = Array.from(allTOCLinks)
    .map(link => document.querySelector(decodeURIComponent(link.getAttribute("href"))))
    .filter(Boolean);

  const isVisible = el => !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.getAttribute("id");

        // Remove active from all visible TOCs
        allTOCLinks.forEach(link => {
          if (isVisible(link)) link.classList.remove("active");
        });

        // Add active to visible link matching this heading
        const matchingLinks = Array.from(document.querySelectorAll(`.toc a[href="#${id}"]`));
        matchingLinks.forEach(link => {
          if (isVisible(link)) link.classList.add("active");
        });
      }
    });
  }, {
    // rootMargin: "-50% 0% -40% 0%",
    threshold: 0.1
  });

  headings.forEach(h => observer.observe(h));
});
      </script>   
    <script>
      document.addEventListener("click", (e) => {
        // Only run on clicks of copy buttons
        const btn = e.target.closest(".copy-btn");
        if (!btn) return;

        // Find the nearest code block wrapper
        const block = e.target.closest(".code-block");
        if (!block) return;

        // Grab the code text (innerText so spans from highlighting are ignored)
        const codeEl = block.querySelector("code");
        const text   = codeEl.innerText;

        // Copy it
        navigator.clipboard.writeText(text);
      });
    </script>
        <script>
          document.addEventListener("click", (e) => {
            // Only run on clicks of copy buttons
            const btn = e.target.closest(".run-btn");
            if (!btn) return;
    
            // Find the nearest code block wrapper
            const block = e.target.closest(".code-demo");
            if (!block) return;
    
            // Grab the code text (innerText so spans from highlighting are ignored)
            const codeEl = block.querySelector("code");
            const text   = codeEl.innerText;
            eval(`"use strict";\n${text}`);
    
            // Copy it
            navigator.clipboard.writeText(text);
          });
        </script>
    
</body>
</html>